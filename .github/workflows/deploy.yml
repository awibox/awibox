name: Deploy
on:
  push:
    branches:
      - master
jobs:
  deploy:
    name: Deploy
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@master
      - name: yarn install, build, and test
        run: |
          yarn install
          yarn lint
          yarn build
          yarn test --coverage
        env:
          CI: true
      - name: Deploy to prod
        uses: andstor/copycat-action@v1.1.0
        env:
          DST_BRANCH: master
          DST_OWNER: awibox
          DST_REPO_NAME: awibox.github.io
          DST_PATH: /.
          GH_PAT: ${{ secrets.GH_PAT }}
          SRC_BRANCH: master
          SRC_PATH: public/.
          USERNAME: awibox
          EMAIL: andrei@awb.pw
        - name: Coveralls
          uses: coverallsapp/github-action@master
          with:
           github-token: ${{ secrets.GITHUB_TOKEN }}

